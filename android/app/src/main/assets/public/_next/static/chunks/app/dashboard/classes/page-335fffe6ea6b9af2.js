(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4078],{12924:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>B});var r=a(95155),l=a(12115),t=a(62177),n=a(90221),i=a(55594),c=a(35317),d=a(56104),o=a(87481),h=a(54165),u=a(30285),m=a(17759),x=a(62523),p=a(34301),j=a(50172);let f=i.Ik({className:i.Yj().min(1,{message:"Nama kelas tidak boleh kosong."})});function y(){let[e,s]=(0,l.useState)(!1),[a,i]=(0,l.useState)(!1),{toast:y}=(0,o.dj)(),g=(0,t.mN)({resolver:(0,n.u)(f),defaultValues:{className:""}}),v=async e=>{i(!0);try{await (0,c.gS)((0,c.rJ)(d.db,"classes"),{className:e.className,studentCount:0,createdAt:(0,c.O5)()}),y({title:"Sukses",description:"Kelas baru berhasil ditambahkan."}),g.reset(),s(!1)}catch(e){y({variant:"destructive",title:"Kesalahan",description:"Gagal menambahkan kelas baru."})}finally{i(!1)}};return(0,r.jsxs)(h.lG,{open:e,onOpenChange:s,children:[(0,r.jsx)(h.zM,{asChild:!0,children:(0,r.jsxs)(u.$,{children:[(0,r.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"Tambah Kelas Baru"]})}),(0,r.jsxs)(h.Cf,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(h.c7,{children:[(0,r.jsx)(h.L3,{children:"Tambah Kelas Baru"}),(0,r.jsx)(h.rr,{children:"Masukkan nama untuk kelas baru. Klik simpan jika sudah selesai."})]}),(0,r.jsx)(m.lV,{...g,children:(0,r.jsxs)("form",{onSubmit:g.handleSubmit(v),className:"space-y-4 py-4",children:[(0,r.jsx)(m.zB,{control:g.control,name:"className",render:e=>{let{field:s}=e;return(0,r.jsxs)(m.eI,{children:[(0,r.jsx)(m.lR,{children:"Nama Kelas"}),(0,r.jsx)(m.MJ,{children:(0,r.jsx)(x.p,{placeholder:"Contoh: 10A",...s})}),(0,r.jsx)(m.C5,{})]})}}),(0,r.jsx)(h.Es,{children:(0,r.jsxs)(u.$,{type:"submit",disabled:a,children:[a&&(0,r.jsx)(j.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Simpan"]})})]})})]})]})}var g=a(6874),v=a.n(g),b=a(66695),N=a(44838),k=a(50286),w=a(38350),A=a(49545),C=a(59434),E=a(18763);let S=i.Ik({className:i.Yj().min(1,{message:"Nama kelas tidak boleh kosong."})});function D(e){let{classId:s,currentClassName:a,triggerType:i="button"}=e,[p,f]=(0,l.useState)(!1),[y,g]=(0,l.useState)(!1),{toast:v}=(0,o.dj)(),b=(0,t.mN)({resolver:(0,n.u)(S),defaultValues:{className:a}});(0,l.useEffect)(()=>{p&&b.reset({className:a})},[p,a,b]);let N=async e=>{g(!0);try{let a=(0,c.H9)(d.db,"classes",s);await (0,c.mZ)(a,{className:e.className}),v({title:"Sukses",description:"Nama kelas berhasil diperbarui."}),f(!1)}catch(e){v({variant:"destructive",title:"Kesalahan",description:"Gagal memperbarui nama kelas."})}finally{g(!1)}},k="button"===i?(0,r.jsxs)(u.$,{variant:"outline",size:"icon",children:[(0,r.jsx)(E.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Edit Kelas"})]}):(0,r.jsxs)("div",{className:"relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:bg-accent hover:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 w-full",children:[(0,r.jsx)(E.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Edit"})]});return(0,r.jsxs)(h.lG,{open:p,onOpenChange:f,children:[(0,r.jsx)(h.zM,{asChild:!0,children:k}),(0,r.jsxs)(h.Cf,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(h.c7,{children:[(0,r.jsx)(h.L3,{children:"Edit Nama Kelas"}),(0,r.jsx)(h.rr,{children:"Ubah nama kelas dan klik simpan untuk menerapkan perubahan."})]}),(0,r.jsx)(m.lV,{...b,children:(0,r.jsxs)("form",{onSubmit:b.handleSubmit(N),className:"space-y-4 py-4",children:[(0,r.jsx)(m.zB,{control:b.control,name:"className",render:e=>{let{field:s}=e;return(0,r.jsxs)(m.eI,{children:[(0,r.jsx)(m.lR,{children:"Nama Kelas"}),(0,r.jsx)(m.MJ,{children:(0,r.jsx)(x.p,{...s})}),(0,r.jsx)(m.C5,{})]})}}),(0,r.jsx)(h.Es,{children:(0,r.jsxs)(u.$,{type:"submit",disabled:y,children:[y&&(0,r.jsx)(j.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Simpan Perubahan"]})})]})})]})]})}var M=a(90010),R=a(77223);function K(e){let{classId:s,className:a,triggerType:t="button"}=e,[n,i]=(0,l.useState)(!1),{toast:h}=(0,o.dj)(),m=async()=>{i(!0);try{await (0,c.kd)((0,c.H9)(d.db,"classes",s)),h({title:"Sukses",description:"Kelas ".concat(a," berhasil dihapus.")})}catch(e){h({variant:"destructive",title:"Kesalahan",description:"Gagal menghapus kelas."})}finally{i(!1)}},x="button"===t?(0,r.jsxs)(u.$,{variant:"destructive",size:"icon",children:[(0,r.jsx)(R.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Hapus Kelas"})]}):(0,r.jsxs)("div",{className:"relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:bg-accent hover:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 w-full text-destructive focus:bg-accent focus:text-destructive",children:[(0,r.jsx)(R.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Hapus"})]});return(0,r.jsxs)(M.Lt,{children:[(0,r.jsx)(M.tv,{asChild:!0,children:x}),(0,r.jsxs)(M.EO,{children:[(0,r.jsxs)(M.wd,{children:[(0,r.jsx)(M.r7,{children:"Apakah Anda yakin?"}),(0,r.jsxs)(M.$v,{children:["Tindakan ini akan menghapus kelas ",(0,r.jsx)("span",{className:"font-bold",children:a}),". Data siswa dan absensi terkait TIDAK akan terhapus secara otomatis. Aksi ini tidak dapat diurungkan."]})]}),(0,r.jsxs)(M.ck,{children:[(0,r.jsx)(M.Zr,{children:"Batal"}),(0,r.jsxs)(M.Rx,{onClick:m,disabled:n,className:"bg-destructive hover:bg-destructive/90",children:[n&&(0,r.jsx)(j.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Ya, Hapus"]})]})]})]})}function O(e){let{id:s,name:a,studentCount:l}=e;return(0,r.jsxs)(b.Zp,{className:"flex flex-col transition-all hover:shadow-lg",children:[(0,r.jsx)(b.aR,{className:"flex-grow",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(b.ZB,{className:"text-xl",children:a}),(0,r.jsxs)(b.BT,{className:"flex items-center pt-1",children:[(0,r.jsx)(k.A,{className:"mr-2 h-4 w-4"}),l," siswa terdaftar"]})]}),(0,r.jsxs)(N.rI,{children:[(0,r.jsx)(N.ty,{asChild:!0,children:(0,r.jsxs)(u.$,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",children:[(0,r.jsx)(w.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Opsi Kelas"})]})}),(0,r.jsxs)(N.SQ,{align:"end",children:[(0,r.jsx)(N._2,{asChild:!0,children:(0,r.jsx)(D,{classId:s,currentClassName:a,triggerType:"menu"})}),(0,r.jsx)(N._2,{asChild:!0,children:(0,r.jsx)(K,{classId:s,className:a,triggerType:"menu"})})]})]})]})}),(0,r.jsx)(b.Wu,{}),(0,r.jsxs)(b.wL,{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[(0,r.jsxs)(v(),{href:"/dashboard/attendance/".concat(s),className:(0,C.cn)((0,u.r)({variant:"default"})),children:[(0,r.jsx)(A.A,{className:"mr-2 h-4 w-4"}),"Absensi"]}),(0,r.jsxs)(v(),{href:"/dashboard/class/".concat(s),className:(0,C.cn)((0,u.r)({variant:"secondary"})),children:[(0,r.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"Siswa"]})]})]})}var V=a(68856);function I(){let[e,s]=(0,l.useState)([]),[a,t]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{let e=(0,c.P)((0,c.rJ)(d.db,"classes"),(0,c.My)("createdAt","desc")),a=(0,c.aQ)(e,e=>{let a=[];e.forEach(e=>{a.push({id:e.id,...e.data()})}),s(a),t(!1)});return()=>a()},[]),a)?(0,r.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsxs)("div",{className:"flex flex-col space-y-3 p-4 border rounded-lg bg-card",children:[(0,r.jsx)(V.E,{className:"h-24 w-full rounded-xl"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(V.E,{className:"h-4 w-3/4"}),(0,r.jsx)(V.E,{className:"h-4 w-1/2"})]})]},s))}):0===e.length?(0,r.jsx)("div",{className:"flex flex-1 items-center justify-center rounded-lg border border-dashed shadow-sm py-24","x-chunk":"dashboard-02-chunk-1",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-1 text-center",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold tracking-tight",children:"Belum ada kelas"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Mulai dengan menambahkan kelas baru untuk mengelola siswa dan absensi."})]})}):(0,r.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:e.map(e=>(0,r.jsx)(O,{id:e.id,name:e.className,studentCount:e.studentCount},e.id))})}function B(){return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Daftar Kelas"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Kelola kelas, siswa, dan absensi harian Anda."})]}),(0,r.jsx)(y,{})]}),(0,r.jsx)(I,{})]})}},18763:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},34301:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},38350:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},49545:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]])},50286:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},62278:(e,s,a)=>{"use strict";a.d(s,{rc:()=>H,ZD:()=>T,UC:()=>B,VY:()=>z,hJ:()=>I,ZL:()=>V,bL:()=>K,hE:()=>P,l9:()=>O});var r=a(12115),l=a(46081),t=a(6101),n=a(45821),i=a(85185),c=a(95155);r.forwardRef((e,s)=>{let{children:a,...l}=e,t=r.Children.toArray(a),n=t.find(h);if(n){let e=n.props.children,a=t.map(s=>s!==n?s:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,c.jsx)(d,{...l,ref:s,children:r.isValidElement(e)?r.cloneElement(e,void 0,a):null})}return(0,c.jsx)(d,{...l,ref:s,children:a})}).displayName="Slot";var d=r.forwardRef((e,s)=>{let{children:a,...l}=e;if(r.isValidElement(a)){let e=function(e){let s=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,a=s&&"isReactWarning"in s&&s.isReactWarning;return a?e.ref:(a=(s=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in s&&s.isReactWarning)?e.props.ref:e.props.ref||e.ref}(a),n=function(e,s){let a={...s};for(let r in s){let l=e[r],t=s[r];/^on[A-Z]/.test(r)?l&&t?a[r]=(...e)=>{t(...e),l(...e)}:l&&(a[r]=l):"style"===r?a[r]={...l,...t}:"className"===r&&(a[r]=[l,t].filter(Boolean).join(" "))}return{...e,...a}}(l,a.props);return a.type!==r.Fragment&&(n.ref=s?(0,t.t)(s,e):e),r.cloneElement(a,n)}return r.Children.count(a)>1?r.Children.only(null):null});d.displayName="SlotClone";var o=({children:e})=>(0,c.jsx)(c.Fragment,{children:e});function h(e){return r.isValidElement(e)&&e.type===o}var u="AlertDialog",[m,x]=(0,l.A)(u,[n.Hs]),p=(0,n.Hs)(),j=e=>{let{__scopeAlertDialog:s,...a}=e,r=p(s);return(0,c.jsx)(n.bL,{...r,...a,modal:!0})};j.displayName=u;var f=r.forwardRef((e,s)=>{let{__scopeAlertDialog:a,...r}=e,l=p(a);return(0,c.jsx)(n.l9,{...l,...r,ref:s})});f.displayName="AlertDialogTrigger";var y=e=>{let{__scopeAlertDialog:s,...a}=e,r=p(s);return(0,c.jsx)(n.ZL,{...r,...a})};y.displayName="AlertDialogPortal";var g=r.forwardRef((e,s)=>{let{__scopeAlertDialog:a,...r}=e,l=p(a);return(0,c.jsx)(n.hJ,{...l,...r,ref:s})});g.displayName="AlertDialogOverlay";var v="AlertDialogContent",[b,N]=m(v),k=r.forwardRef((e,s)=>{let{__scopeAlertDialog:a,children:l,...d}=e,h=p(a),u=r.useRef(null),m=(0,t.s)(s,u),x=r.useRef(null);return(0,c.jsx)(n.G$,{contentName:v,titleName:w,docsSlug:"alert-dialog",children:(0,c.jsx)(b,{scope:a,cancelRef:x,children:(0,c.jsxs)(n.UC,{role:"alertdialog",...h,...d,ref:m,onOpenAutoFocus:(0,i.m)(d.onOpenAutoFocus,e=>{var s;e.preventDefault(),null==(s=x.current)||s.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,c.jsx)(o,{children:l}),(0,c.jsx)(R,{contentRef:u})]})})})});k.displayName=v;var w="AlertDialogTitle",A=r.forwardRef((e,s)=>{let{__scopeAlertDialog:a,...r}=e,l=p(a);return(0,c.jsx)(n.hE,{...l,...r,ref:s})});A.displayName=w;var C="AlertDialogDescription",E=r.forwardRef((e,s)=>{let{__scopeAlertDialog:a,...r}=e,l=p(a);return(0,c.jsx)(n.VY,{...l,...r,ref:s})});E.displayName=C;var S=r.forwardRef((e,s)=>{let{__scopeAlertDialog:a,...r}=e,l=p(a);return(0,c.jsx)(n.bm,{...l,...r,ref:s})});S.displayName="AlertDialogAction";var D="AlertDialogCancel",M=r.forwardRef((e,s)=>{let{__scopeAlertDialog:a,...r}=e,{cancelRef:l}=N(D,a),i=p(a),d=(0,t.s)(s,l);return(0,c.jsx)(n.bm,{...i,...r,ref:d})});M.displayName=D;var R=e=>{let{contentRef:s}=e,a="`".concat(v,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(v,"` by passing a `").concat(C,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(v,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return r.useEffect(()=>{var e;document.getElementById(null==(e=s.current)?void 0:e.getAttribute("aria-describedby"))||console.warn(a)},[a,s]),null},K=j,O=f,V=y,I=g,B=k,H=S,T=M,P=A,z=E},73527:(e,s,a)=>{Promise.resolve().then(a.bind(a,12924))},77223:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[2992,3644,5511,3366,8248,4053,7239,9032,8795,5521,9371,4131,8441,1684,7358],()=>s(73527)),_N_E=e.O()}]);